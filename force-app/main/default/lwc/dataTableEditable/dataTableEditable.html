<template>
    <lightning-card>
        <div class="slds-var-p-around_small">
            <div>
                <span
                    class="slds-form-element__label slds-text-title_bold slds-var-p-top_small slds-var-p-bottom_small">Dynamic Table</span>
            </div>
            <template lwc:if={showTable}>
                <div style="height: 680px;" onitemregister={handleRegisterItem}>
                
                    <c-custom-data-table class="slds-max-medium-table_stacked" 
                        onvaluechange={handleValueChange}
                        oncellchange={handleCellChange} 
                        data={records} 
                        columns={columns} 
                        show-row-number-column="false"
                        enable-infinite-loading
                        onloadmore={loadMoreData}
                        key-field="Id" 
                        draft-values={draftValues} 
                        onsave={handleSave} 
                        data-record="Id" 
                        onedit={handleEdit}
                        hide-checkbox-column="true" 
                        oncancel={handleCancel}
                        sorted-by="Name">
                    </c-custom-data-table>
                </div>
            </template>
        </div>
        <div class="showSpinner" if:true={showSpinner}>
            <lightning-spinner alternative-text="Loading" variant="brand"></lightning-spinner>
        </div>
    </lightning-card>
</template>